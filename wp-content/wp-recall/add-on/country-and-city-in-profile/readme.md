## Описание:

Дополнение для WordPress плагина [Wp-Recall](https://wordpress.org/plugins/wp-recall/) - добавляет в профиль пользователю, возможность выбрать страну и вписать город проживания. 
Выводит флаг страны. Позволяет по городу фильтровать пользователей

------------------------------

## Возможности:

В личном кабинете пользователя появляется селект выбора страны из предустановленных
Город вписывается пользователем. Имеет простую защиту: Город может быть указан на русском языке или английском + доступные символы: пробел и дефис (-). Город не может содержать цифр.
Варианты написания : Санкт-Петербург, Ростов-на-Дону, Нижний Новгород, Düsseldorf.
При ошибке вам выйдет уведомление и вы не сможете сохранить ошибочное значение.

Вывод введенных значений осуществляется в подробной информации личного кабинета, в блоке автора и в списке пользователей. 
К стране прикрепляется ее официальный флаг. А город является ссылкой-фильтром по всем пользователям (выведет всех из этого города). При условии что у вас стоит шорткод userlist и настроена страница вывода всех пользователей.

Аддон не имеет своих настроек

[Демонстрация работы в списке пользователей](https://otshelnik-fm.ru/userlist/?utm_source=free-addons&utm_medium=addon-description-demo-link&utm_campaign=country-and-city-in-profile&utm_content=github.com&utm_term=userlist) - PRO-версия  

------------------------------

## Установка/Обновление

**Установка:**
Т.к. это дополнение для WordPress плагина WP-Recall, то оно устанавливается через [менеджер дополнений WP-Recall](https://codeseller.ru/obshhie-svedeniya-o-dopolneniyax-wp-recall/)

1. В админке вашего сайта перейдите на страницу "WP-Recall" -> "Дополнения" и в самом верху нажмите на кнопку "Обзор", выберите .zip архив дополнения на вашем пк и нажмите кнопку "Установить".
2. В списке загруженных дополнений, на этой странице, найдите это дополнение, наведите на него курсор мыши и нажмите кнопку "Активировать". Или выберите чекбокс и в выпадающем списке действия выберите "Активировать". Нажмите применить.


**Обновление:**
Дополнение поддерживает [автоматическое обновление](https://codeseller.ru/avtomaticheskie-obnovleniya-dopolnenij-plagina-wp-recall/) - два раза в день отправляются вашим сервером запросы на обновление.
Если в течении суток вы не видите обновления (а на странице дополнения вы видите что версия вышла новая), советую ознакомиться с этой [статьёй](https://codeseller.ru/post-group/rabota-wordpress-krona-cron-prinuditelnoe-vypolnenie-kron-zadach-dlya-wp-recall/)

------------------------------

## FAQ    
**Как я могу сам вывести в нужном мне месте флаг, страну и город?**    
- Вы можете выводить флаг, страну и город функцией: `ucc_get_value($user_id);` передайте только id нужного юзера

**Как организовать поиск пользователей по городу**    
- Стройте запрос используя поля `ucc_country` и `ucc_sity`

**Где хранятся данные? И как самому их достать?**    
- Данные хранятся в таблице wp_usermeta, из этого поля можно получить функцией `get_user_meta()`

**Есть поддержка украинского языка?**    
- Нет. Но подобный вопрос решался [здесь](https://codeseller.ru/forum/product-10541/ne-podderzhivaetsya-ukrainskij-alfavit-v-dopolnenii-country-and-city-in-profile/)

**А как с переводом на другие языки?**    
- Данное дополнение отдается бесплатно, код открыт - можете форкнуть его, добавить и улучшить, и предложить мне на слияние (Pull Request)   
Страница дополнения в репозитории [github](https://github.com/Otshelnik-Fm/country-and-city-in-profile/)

**Страны это хорошо, а как насчет базы городов?**    
- В данном дополнении этого не будет. Не хочу его усложнять. Поэтому города проходят через простой паттерн [А-Яа-яЁёa-zA-ZäÄöÖüÜß]    

**Бывают военные городки, которые имеют цифры в названиях**    
- Цитирую: <blockquote>На то они и военные чтобы не светиться )). И у них может быть 2 имени, или цифра - означает отдаленность от основного города.    
Правда отдаленность в цифре фейковая - чтобы сбить шпионов.</blockquote>     
Поэтому военные и ЗАТО я отбросил.    

**А почему бы не использовать поля профиля WP-Recall чтобы построить базу стран и поле для ввода города?**   
- Это извращение и пустая трата времени - вписывать >180 стран.    
Тут - поставил и забыл. Дополнение простейшее и не несет никакой нагрузки на ваш сайт.   

------------------------------

## Changelog  
**2019-02-26**  
v2.5.1  
* Небольшие правки на странице настроек  


**2018-12-10**  
v2.5  
* работа с WP-Recall 16.17  
* исправил - не показывалась страна и город в всплывающем окне подробной информации  
* небольшие правки  
* добавлена иконка дополнения  


**2018-10-11**  
v2.4  
* работа с WP-Recall 16.16  
* инлайн стиль вписан к флагу. Убран из header  
* иконки флагов стали легче на 60% - привёл их к нужному размеру (были 48, а использую на 36) и сжал  
* таблицу страны и города в профиле привел к стандарту таблиц WP-Recall  
* доп Profile Search больше не распространяется автором. Но с ним интеграцию пока оставляю. Но я тоже отказываюсь от его поддержки.  


**2017-04-20**   
v2.3
* Работа с 16-й версией WP-Recall


**2017-02-23**    
v2.2.2    
* Рефакторинг
* Поправил верстку - иногда стили к флагу не прогружались.


**2017-02-10**    
v2.2.1    
* Убрано дублирование стилей в списке пользователей (вывод шорткодом userlist)
* Исправлена ошибка в верстке

**2016-07-17**    
v2.2    
* Работа с плагином WP-Recall 15-й версии.

**2016-05-16**    
v2.1    
* Теперь вы можете выводить флаг, страну и город функцией: <code>ucc_get_value($user_id);</code>
в произвольном месте (например в комментариях) - передайте только id нужного юзера

**2016-04-01**    
v2.0    
* Работа с аддоном Profile Search (С версией аддона: 1.0.10 и выше!) https://codeseller.ru/products/profile-search-proizvolnyj-poisk-po-polyam-profilya-polzovatelej/ - вывод в форме поиска пользователей. Указываем на странице фильтра (в админке при активированном Profile Search страница "Форма поиска"), согласно скриншоту выше.
* Возможность фильтровать пользователей по значению города (При условии что у вас стоит шорткод userlist https://codeseller.ru/api-rcl/userlist/ и настроена страница вывода всех пользователей.)
* Выводит страну и город в блоке автора и в списке всех пользователей

**2015-11-01**    
v1.1    
* Возможно вписывать город и на латинице.

**2015-10-25**    
v1.0    
* Release 

------------------------------

## Поддержка/Контакты  

* Поддержка осуществляется в рамках текущего функционала дополнения  
* При возникновении проблемы, создайте соотвествующую тему на форуме поддержки товара  
* Если вам нужна доработка под ваши нужды - вы можете обратиться ко мне в [ЛС](https://codeseller.ru/author/otshelnik-fm/?tab=chat) с техзаданием на платную доработку.  

Полный список моих работ опубликован на [моём сайте](https://otshelnik-fm.ru/all-my-addons-for-wp-recall/?utm_source=free-addons&utm_medium=addon-description&utm_campaign=country-and-city-in-profile&utm_content=github.com&utm_term=all-my-addons) и в каталоге магазина [CodeSeller.ru](https://codeseller.ru/author/otshelnik-fm/?tab=publics&subtab=type-products)  

------------------------------

## Author

**Wladimir Druzhaev** (Otshelnik-Fm)

------------------------------

## License

Licensed under the MIT License
